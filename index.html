<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µëª¨ì „ íë ˆì´ì…˜ - ë§ì°¨ v16 FINAL</title>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --matcha-deep: #283618;
            --matcha-mid: #606c38;
            --matcha-light: #dda15e;
            --matcha-cream: #fefae0;
            --matcha-bg: #fdfaf0;
            --accent-glow: rgba(221, 161, 94, 0.4);
            --glass: rgba(254, 250, 224, 0.95);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--matcha-bg); color: var(--matcha-deep); overflow-x: hidden; }

        .bg-wrap { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: var(--matcha-bg); overflow: hidden; }
        .blob { position: absolute; width: 600px; height: 600px; background: var(--matcha-mid); filter: blur(150px); opacity: 0.12; border-radius: 50%; animation: drift 20s infinite alternate; }
        @keyframes drift { from { transform: translate(-15%, -15%); } to { transform: translate(15%, 15%); } }

        .leaf { position: absolute; opacity: 0.15; z-index: -1; animation: float-leaf 10s infinite linear; pointer-events: none; }
        @keyframes float-leaf {
            0% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(20px, 30px) rotate(15deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        .container { max-width: 800px; margin: 0 auto; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; padding: 40px 20px; padding-bottom: 140px; }
        .card { background: var(--glass); border: 2px solid #e9edc9; padding: 60px 40px 50px 40px; border-radius: 50px; box-shadow: 0 20px 60px rgba(40, 54, 24, 0.08); text-align: center; width: 100%; position: relative; transition: all 0.4s ease; }

        .back-btn {
            position: absolute;
            top: 30px;
            left: 35px;
            background: none;
            border: none;
            color: var(--matcha-mid);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 700;
            font-size: 0.9rem;
            transition: 0.3s;
            z-index: 10;
        }
        .back-btn:hover { color: var(--matcha-light); transform: translateX(-5px); }

        h1 { font-family: 'Gowun Batang', serif; font-size: 2.5rem; color: var(--matcha-deep); margin-bottom: 25px; word-break: keep-all; }
        p { color: var(--matcha-mid); font-size: 1.1rem; line-height: 1.6; }

        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 40px; }
        .btn { padding: 22px 30px; border-radius: 100px; border: none; font-weight: 700; font-size: 1.1rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .btn-primary { background: var(--matcha-mid); color: white; }
        .btn-outline { background: white; color: var(--matcha-mid); border: 2px solid var(--matcha-mid); }
        .btn:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 10px 25px var(--accent-glow); }

        input, select { width: 100%; padding: 18px; border-radius: 20px; border: 2px solid #e9edc9; background: white; color: var(--matcha-deep); font-size: 1rem; outline: none; transition: 0.3s; }
        label { display: block; text-align: left; margin: 15px 0 8px 10px; font-weight: 700; color: var(--matcha-deep); }

        .cat-box { position: absolute; bottom: 12px; left: 0%; transform: translateX(-50%); transition: left 0.6s cubic-bezier(0.25, 0.1, 0.25, 1); }
        .cat-body { font-size: 45px; position: relative; animation: run-bob 0.2s infinite alternate; }
        .sweat { position: absolute; top: -5px; right: -10px; font-size: 20px; animation: sweat-drop 0.6s infinite; }
        @keyframes run-bob { from { transform: translateY(0) rotate(-5deg); } to { transform: translateY(-10px) rotate(10deg); } }
        @keyframes sweat-drop { 0% { opacity: 0; transform: translate(0,0); } 50% { opacity: 1; } 100% { opacity: 0; transform: translate(10px, 10px); } }

        .loading-header { margin-bottom: 80px; }
        .loading-container { width: 100%; position: relative; padding: 20px 0; }
        .loading-bar-wrap { position: relative; width: 100%; height: 12px; background: #e9edc9; border-radius: 20px; }
        #loader-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--matcha-mid), var(--matcha-light)); border-radius: 20px; }

        .res-scroll-area { max-height: 500px; overflow-y: auto; padding: 15px; margin-top: 30px; border-radius: 30px; border: 1px solid #e9edc9; }
        .res-item { background: white; border-radius: 35px; padding: 30px; text-align: left; border: 2px solid #e9edc9; cursor: pointer; transition: 0.4s; position: relative; margin-bottom: 20px; }
        .res-item:hover { transform: scale(1.02); border-color: var(--matcha-light); box-shadow: 0 15px 35px rgba(221, 161, 94, 0.15); }
        .match-score { position: absolute; top: 25px; right: 30px; font-weight: 800; color: var(--matcha-light); font-size: 1.2rem; }
        .hashtag { font-size: 0.85rem; background: var(--matcha-cream); color: var(--matcha-mid); padding: 5px 12px; border-radius: 50px; font-weight: 600; margin-right: 5px; margin-top: 5px; display: inline-block; }

        #progress-wrapper { position: fixed; bottom: 0; left: 0; width: 100%; height: 110px; background: rgba(255, 255, 255, 0.96); backdrop-filter: blur(15px); border-top: 2px solid #e9edc9; display: none; z-index: 1000; }
        .bar-wrap { position: relative; width: 85%; margin: 55px auto 0; height: 12px; background: #e9edc9; border-radius: 20px; }
        #bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--matcha-mid), var(--matcha-light)); border-radius: 20px; transition: 0.6s; }

        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.8s forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="bg-wrap">
    <div class="blob" style="top: -5%; left: -5%;"></div>
    <div class="blob" style="bottom: -5%; right: -5%; background: var(--matcha-light);"></div>
    <svg class="leaf" style="top:10%; left:5%; width:50px;" viewBox="0 0 24 24" fill="var(--matcha-mid)"><path d="M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z"/></svg>
    <svg class="leaf" style="top:60%; left:85%; width:40px; animation-delay: 2s;" viewBox="0 0 24 24" fill="var(--matcha-mid)"><path d="M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z"/></svg>
    <svg class="leaf" style="top:80%; left:10%; width:60px; animation-delay: 5s;" viewBox="0 0 24 24" fill="var(--matcha-mid)"><path d="M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z"/></svg>
</div>

<div class="container">
    <div id="screen-start" class="card fade-in">
        <h1>ë‚˜ë§Œì˜ ê³µëª¨ì „ íë ˆì´ì…˜</h1>
        <p>ë³µì¡í•œ ë¦¬ìŠ¤íŠ¸ëŠ” ìŠìœ¼ì„¸ìš”.<br>ì‚¬ìš©ìì—ê²Œ ê°€ì¥ ì„±ê³µ í™•ë¥ ì´ ë†’ì€ ê³µëª¨ì „ì„ ì„ ë³„í•´ ë“œë¦½ë‹ˆë‹¤.</p>
        <div class="btn-group">
            <button class="btn btn-outline" onclick="selectMode('fast')">ë¹ ë¥¸ ë§¤ì¹­ ì‹œì‘</button>
            <button class="btn btn-primary" onclick="selectMode('pro')">ì •ë°€ ë¶„ì„ ì‹œì‘</button>
        </div>
    </div>

    <div id="screen-info" class="card hidden">
        <button class="back-btn" onclick="goBack('screen-info')"><i data-lucide="chevron-left"></i> ì²˜ìŒìœ¼ë¡œ</button>
        <h1>ì •ë³´ ì…ë ¥</h1>
        <div style="text-align:left; margin-top:20px;">
            <label>ì„±í•¨</label>
            <input type="text" id="u-name" value="ìœ¤ì§„ì„±">
            <label>ìƒë…„ì›”ì¼</label>
            <div style="display:flex; gap:8px;"><select id="u-year"></select><select id="u-month"></select><select id="u-day"></select></div>
            <label>ê±°ì£¼ ì§€ì—­ (ëŒ€í•œë¯¼êµ­ ì „ì—­)</label>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;"><select id="u-region-main" onchange="updateSubRegion()"></select><select id="u-region-sub"><option value="">ì‹œ/êµ°/êµ¬ ì„ íƒ</option></select></div>
            <label>í˜„ì¬ ì§ì—…</label>
            <select id="u-job"><option value="">ì„ íƒí•˜ì„¸ìš”</option><option value="univ">ëŒ€í•™ìƒ/ëŒ€í•™ì›ìƒ</option><option value="worker">ì§ì¥ì¸/í”„ë¦¬ëœì„œ</option><option value="none">ì·¨ì¤€ìƒ/ê¸°íƒ€</option></select>
        </div>
        <button class="btn btn-primary" style="width:100%; margin-top:30px;" onclick="validateAndStart()">ë¶„ì„ ì—”ì§„ ê°€ë™ <i data-lucide="arrow-right"></i></button>
    </div>

    <div id="screen-genre" class="card hidden">
        <button class="back-btn" onclick="goBack('screen-genre')"><i data-lucide="chevron-left"></i> ì´ì „ ë‹¨ê³„</button>
        <h1>ê´€ì‹¬ ë¶„ì•¼ ì„ íƒ</h1>
        <div class="btn-group">
            <button class="btn btn-outline" onclick="selectGenre('ì˜ìƒ')">ğŸ¥ ì˜ìƒ/ë¯¸ë””ì–´</button>
            <button class="btn btn-outline" onclick="selectGenre('IT')">ğŸ’» IT/ì†Œí”„íŠ¸ì›¨ì–´</button>
            <button class="btn btn-outline" onclick="selectGenre('ìŒì•…')">ğŸµ ìŒì•…/ì‚¬ìš´ë“œ</button>
            <button class="btn btn-outline" onclick="selectGenre('ê¸°íš')">ğŸ’¡ ê¸°íš/ì•„ì´ë””ì–´</button>
        </div>
    </div>

    <div id="screen-quiz" class="card hidden">
        <button class="back-btn" onclick="goBack('screen-quiz')"><i data-lucide="chevron-left"></i> ì´ì „ ì§ˆë¬¸</button>
        <p id="quiz-count" style="color:var(--matcha-mid); font-weight:800; margin-bottom:10px;"></p>
        <h2 id="quiz-q">ì§ˆë¬¸ì„ êµ¬ì„±í•˜ëŠ” ì¤‘...</h2>
        <div id="quiz-opts" style="display:grid; gap:15px; margin-top:40px;"></div>
    </div>

    <div id="screen-loading" class="card hidden">
        <div class="loading-header">
            <h2><span class="accent" id="load-name"></span>ë‹˜ì„ ìœ„í•´ ë•€ í˜ë¦¬ë©° ë§¤ì¹­ ì¤‘!</h2>
            <p style="color:#64748b; margin-top:10px;">AI ì•Œê³ ë¦¬ì¦˜ì´ ìµœì ì˜ ìˆœìœ„ë¥¼ ê³„ì‚°í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
        </div>
        <div class="loading-container">
            <div class="loading-bar-wrap">
                <div id="loader-fill"></div>
                <div id="loader-cat" class="cat-box">
                    <div class="cat-body">ğŸ±<span class="sweat">ğŸ’¦</span></div>
                </div>
            </div>
        </div>
    </div>

    <div id="screen-result" class="hidden" style="width:100%">
        <h1 style="text-align:center;"><span class="accent" id="res-name"></span>ë‹˜ ë§ì¶¤ ë§¤ì¹­ ìˆœìœ„</h1>
        <div class="res-scroll-area">
            <div id="res-list" class="res-list"></div>
        </div>
        <div class="btn-group" style="margin-top:40px;">
            <button class="btn btn-outline" onclick="reQuiz()">ğŸ” ë¶„ì„ ë‹¤ì‹œí•˜ê¸°</button>
            <button class="btn btn-primary" onclick="reInfo()">ğŸ‘¤ ì •ë³´ ìˆ˜ì •í•˜ê¸°</button>
        </div>
    </div>
</div>

<div id="progress-wrapper">
    <div class="bar-wrap">
        <div id="bar-fill"></div>
        <div id="cat-container" class="cat-box">
            <div class="cat-body">ğŸ±<span class="sweat">ğŸ’¦</span></div>
        </div>
    </div>
</div>

<script>
    const regionData = {
        "ì„œìš¸": ["ê°•ë‚¨êµ¬","ê°•ë™êµ¬","ê°•ë¶êµ¬","ê°•ì„œêµ¬","ê´€ì•…êµ¬","ê´‘ì§„êµ¬","êµ¬ë¡œêµ¬","ê¸ˆì²œêµ¬","ë…¸ì›êµ¬","ë„ë´‰êµ¬","ë™ëŒ€ë¬¸êµ¬","ë™ì‘êµ¬","ë§ˆí¬êµ¬","ì„œëŒ€ë¬¸êµ¬","ì„œì´ˆêµ¬","ì„±ë™êµ¬","ì„±ë¶êµ¬","ì†¡íŒŒêµ¬","ì–‘ì²œêµ¬","ì˜ë“±í¬êµ¬","ìš©ì‚°êµ¬","ì€í‰êµ¬","ì¢…ë¡œêµ¬","ì¤‘êµ¬","ì¤‘ë‘êµ¬"],
        "ë¶€ì‚°": ["ê°•ì„œêµ¬","ê¸ˆì •êµ¬","ë‚¨êµ¬","ë™êµ¬","ë™ë˜êµ¬","ë¶€ì‚°ì§„êµ¬","ë¶êµ¬","ì‚¬ìƒêµ¬","ì‚¬í•˜êµ¬","ì„œêµ¬","ìˆ˜ì˜êµ¬","ì—°ì œêµ¬","ì˜ë„êµ¬","ì¤‘êµ¬","í•´ìš´ëŒ€êµ¬","ê¸°ì¥êµ°"],
        "ëŒ€êµ¬": ["ë‚¨êµ¬","ë‹¬ì„œêµ¬","ë™êµ¬","ë¶êµ¬","ì„œêµ¬","ìˆ˜ì„±êµ¬","ì¤‘êµ¬","ë‹¬ì„±êµ°","êµ°ìœ„êµ°"],
        "ì¸ì²œ": ["ê³„ì–‘êµ¬","ë¯¸ì¶”í™€êµ¬","ë‚¨ë™êµ¬","ë™êµ¬","ë¶€í‰êµ¬","ì„œêµ¬","ì—°ìˆ˜êµ¬","ì¤‘êµ¬","ê°•í™”êµ°","ì˜¹ì§„êµ°"],
        "ê²½ê¸°": ["ìˆ˜ì›ì‹œ","ê³ ì–‘ì‹œ","ìš©ì¸ì‹œ","ì„±ë‚¨ì‹œ","ë¶€ì²œì‹œ","í™”ì„±ì‹œ","ì•ˆì‚°ì‹œ","ë‚¨ì–‘ì£¼ì‹œ","ì•ˆì–‘ì‹œ","í‰íƒì‹œ","ì‹œí¥ì‹œ","íŒŒì£¼ì‹œ","ì˜ì •ë¶€ì‹œ","ê¹€í¬ì‹œ","ê´‘ì£¼ì‹œ","ê´‘ëª…ì‹œ","êµ°í¬ì‹œ","í•˜ë‚¨ì‹œ","ì˜¤ì‚°ì‹œ","ì–‘ì£¼ì‹œ","ì´ì²œì‹œ","êµ¬ë¦¬ì‹œ","ì•ˆì„±ì‹œ","í¬ì²œì‹œ","ì˜ì™•ì‹œ","ì–‘í‰êµ°","ì—¬ì£¼ì‹œ","ë™ë‘ì²œì‹œ","ê°€í‰êµ°","ê³¼ì²œì‹œ","ì—°ì²œêµ°"],
        "ê²½ë‚¨": ["ì°½ì›ì‹œ","ì§„ì£¼ì‹œ","í†µì˜ì‹œ","ì‚¬ì²œì‹œ","ê¹€í•´ì‹œ","ë°€ì–‘ì‹œ","ê±°ì œì‹œ","ì–‘ì‚°ì‹œ","ì˜ë ¹êµ°","í•¨ì•ˆêµ°","ì°½ë…•êµ°","ê³ ì„±êµ°","ë‚¨í•´êµ°","í•˜ë™êµ°","ì‚°ì²­êµ°","í•¨ì–‘êµ°","ê±°ì°½êµ°","í•©ì²œêµ°"],
        "ê²½ë¶": ["í¬í•­ì‹œ","ê²½ì£¼ì‹œ","ê¹€ì²œì‹œ","ì•ˆë™ì‹œ","êµ¬ë¯¸ì‹œ","ì˜ì£¼ì‹œ","ì˜ì²œì‹œ","ìƒì£¼ì‹œ","ë¬¸ê²½ì‹œ","ê²½ì‚°ì‹œ","ì˜ì„±êµ°","ì²­ì†¡êµ°","ì˜ì–‘êµ°","ì˜ë•êµ°","ì²­ë„êµ°","ê³ ë ¹êµ°","ì„±ì£¼êµ°","ì¹ ê³¡êµ°","ì˜ˆì²œêµ°","ë´‰í™”êµ°","ìš¸ì§„êµ°","ìš¸ë¦‰êµ°"],
        "ê°•ì›": ["ì¶˜ì²œì‹œ","ì›ì£¼ì‹œ","ê°•ë¦‰ì‹œ","ë™í•´ì‹œ","íƒœë°±ì‹œ","ì†ì´ˆì‹œ","ì‚¼ì²™ì‹œ","í™ì²œêµ°","íš¡ì„±êµ°","ì˜ì›”êµ°","í‰ì°½êµ°","ì •ì„ êµ°","ì² ì›êµ°","í™”ì²œêµ°","ì–‘êµ¬êµ°","ì¸ì œêµ°","ê³ ì„±êµ°","ì–‘ì–‘êµ°"],
        "ì¶©ë¶": ["ì²­ì£¼ì‹œ","ì¶©ì£¼ì‹œ","ì œì²œì‹œ","ë³´ì€êµ°","ì˜¥ì²œêµ°","ì˜ë™êµ°","ì¦í‰êµ°","ì§„ì²œêµ°","ê´´ì‚°êµ°","ìŒì„±êµ°","ë‹¨ì–‘êµ°"],
        "ì¶©ë‚¨": ["ì²œì•ˆì‹œ","ê³µì£¼ì‹œ","ë³´ë ¹ì‹œ","ì•„ì‚°ì‹œ","ì„œì‚°ì‹œ","ë…¼ì‚°ì‹œ","ê³„ë£¡ì‹œ","ë‹¹ì§„ì‹œ","ê¸ˆì‚°êµ°","ë¶€ì—¬êµ°","ì„œì²œêµ°","ì²­ì–‘êµ°","í™ì„±êµ°","ì˜ˆì‚°êµ°","íƒœì•ˆêµ°"],
        "ì „ë¶": ["ì „ì£¼ì‹œ","êµ°ì‚°ì‹œ","ìµì‚°ì‹œ","ì •ìì‹œ","ë‚¨ì›ì‹œ","ê¹€ì œì‹œ","ì™„ì£¼êµ°","ì§„ì•ˆêµ°","ë¬´ì£¼êµ°","ì¥ìˆ˜êµ°","ì„ì‹¤êµ°","ìˆœì°½êµ°","ê³ ì°½êµ°","ë¶€ì•ˆêµ°"],
        "ì „ë‚¨": ["ëª©í¬ì‹œ","ì—¬ìˆ˜ì‹œ","ìˆœì²œì‹œ","ë‚˜ì£¼ì‹œ","ê´‘ì–‘ì‹œ","ë‹´ì–‘êµ°","ê³¡ì„±êµ°","êµ¬ë¡€êµ°","ê³ í¥êµ°","ë³´ì„±êµ°","í™”ìˆœêµ°","ì¥í¥êµ°","ê°•ì§„êµ°","í•´ë‚¨êµ°","ì˜ì•”êµ°","ë¬´ì•ˆêµ°","í•¨í‰êµ°","ì˜ê´‘êµ°","ì¥ì„±êµ°","ì™„ë„êµ°","ì§„ë„êµ°","ì‹ ì•ˆêµ°"],
        "ê´‘ì£¼": ["ê´‘ì‚°êµ¬","ë‚¨êµ¬","ë™êµ¬","ë¶êµ¬","ì„œêµ¬"],
        "ëŒ€ì „": ["ëŒ€ë•êµ¬","ë™êµ¬","ì„œêµ¬","ìœ ì„±êµ¬","ì¤‘êµ¬"],
        "ìš¸ì‚°": ["ë‚¨êµ¬","ë™êµ¬","ë¶êµ¬","ì¤‘êµ¬","ìš¸ì£¼êµ°"],
        "ì„¸ì¢…": ["ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ"],
        "ì œì£¼": ["ì œì£¼ì‹œ","ì„œê·€í¬ì‹œ"]
    };

    // [ì¤‘ìš”] ëª¨ë“  ì¹´í…Œê³ ë¦¬ ë°ì´í„° ë³´ê°• (ìŒì•…/ê¸°íš í¬í•¨)
    const contestDB = [
        // ì˜ìƒ ë¶„ì•¼
        { title: "ì œ29íšŒ 29ì´ˆ ì˜í™”ì œ", cat: "ì˜ìƒ", link: "http://www.29sfilm.com/", prize: 3000, tags: ["#ë‹¨í¸ì˜í™”", "#ì „ê³µë¬´ê´€", "#ëŒ€ì¤‘ì„±"], weight: ["ê°œì¸", "ì…ë¬¸", "ì•„ì´ë””ì–´"] },
        { title: "ë¶€ì‚° êµ­ì œ V-LOG ê³µëª¨ì „", cat: "ì˜ìƒ", link: "https://www.busan.go.kr", prize: 500, tags: ["#ì§€ì—­íŠ¹í™”", "#ì—¬í–‰ê¸°ë¡", "#ë¦´ìŠ¤"], weight: ["ê°œì¸", "ìŠ¤ë§ˆíŠ¸í°", "ê²½í—˜"] },
        { title: "ëŒ€í•œë¯¼êµ­ ì²­ë…„ ë¯¸ë””ì–´ ëŒ€ì „", cat: "ì˜ìƒ", link: "http://www.kyff.co.kr/", prize: 1000, tags: ["#ë‹¤íë©˜í„°ë¦¬", "#ì²­ë…„ì˜ˆìˆ ", "#ê³µì‹ ë ¥"], weight: ["íŒ€", "ì „ë¬¸", "ìŠ¤í™"] },
        { title: "í™˜ê²½ë³´í˜¸ ìˆí¼ ì˜ìƒì œ", cat: "ì˜ìƒ", link: "https://www.keco.or.kr", prize: 300, tags: ["#ê³µìµì„±", "#í™˜ê²½ë³´í˜¸", "#ê°„í¸"], weight: ["ê°œì¸", "ì…ë¬¸", "ê²½í—˜"] },
        { title: "ì¼ìƒ ì†ì˜ AI ì˜ìƒì œ", cat: "ì˜ìƒ", link: "https://ai-contest.com", prize: 700, tags: ["#AIê¸°ìˆ ", "#í˜ì‹ ", "#ë¯¸ë˜"], weight: ["ê°œì¸", "ì „ë¬¸", "ì•„ì´ë””ì–´"] },

        // IT ë¶„ì•¼
        { title: "ì‚¼ì„± ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸", cat: "IT", link: "https://soscon.com", prize: 5000, tags: ["#ì˜¤í”ˆì†ŒìŠ¤", "#ëŒ€ê¸°ì—…", "#ê¸°ìˆ ë ¥"], weight: ["íŒ€", "ì „ë¬¸", "ìŠ¤í™"] },
        { title: "ì œ12íšŒ K-í•´ì»¤í†¤ ê²½ì§„ëŒ€íšŒ", cat: "IT", link: "http://k-hackathon.com/", prize: 2000, tags: ["#ì•±ê°œë°œ", "#ì°½ì—…", "#ë„¤íŠ¸ì›Œí‚¹"], weight: ["íŒ€", "ì „ë¬¸", "ìƒê¸ˆ"] },
        { title: "ë„¤ì´ë²„ ì›¹ ì„œë¹„ìŠ¤ ê°œë°œì „", cat: "IT", link: "https://naver.com", prize: 3000, tags: ["#ì›¹ì„œë¹„ìŠ¤", "#UXUI", "#ì±„ìš©ì—°ê³„"], weight: ["íŒ€", "ì „ë¬¸", "ìŠ¤í™"] },
        { title: "LG CNS AI í•´ì»¤í†¤", cat: "IT", link: "https://lgcns.com", prize: 1200, tags: ["#AI", "#í´ë¼ìš°ë“œ", "#ì±„ìš©íŠ¹ì „"], weight: ["íŒ€", "ì „ë¬¸", "ìŠ¤í™"] },
        { title: "ì¹´ì¹´ì˜¤ ëª¨ë°”ì¼ ì›¹ì•± ë¦¬ê·¸", cat: "IT", link: "https://kakao.com", prize: 2500, tags: ["#ì¹´ì¹´ì˜¤í†¡", "#ëª¨ë°”ì¼", "#ì°¸ì‹ í•¨"], weight: ["íŒ€", "ì…ë¬¸", "ìƒê¸ˆ"] },

        // ìŒì•… ë¶„ì•¼ (ì§„ì„±ë‹˜ ìš”ì²­ìœ¼ë¡œ ì „ë©´ ë³´ê°•)
        { title: "MBC ê°•ë³€ê°€ìš”ì œ ë‰´ì±Œë¦°ì§€", cat: "ìŒì•…", link: "https://www.mbc.go.kr", prize: 3000, tags: ["#ì°½ì‘ê³¡", "#ë³´ì»¬", "#ì „í†µìˆëŠ”"], weight: ["ê°œì¸", "ì „ë¬¸", "ìƒê¸ˆ"] },
        { title: "ìœ ë‹ˆë²„ì„¤ ë®¤ì§ ê¸€ë¡œë²Œ ì˜¤ë””ì…˜", cat: "ìŒì•…", link: "https://www.universalmusic.co.kr/", prize: 1000, tags: ["#ê¸€ë¡œë²Œ", "#ë°ë·”ê¸°íšŒ", "#íŒ/R&B"], weight: ["ê°œì¸", "ì…ë¬¸", "ìŠ¤í™"] },
        { title: "ì „êµ­ ìš°ë¦¬ë™ë„¤ ë¡œê³ ì†¡ ê³µëª¨ì „", cat: "ìŒì•…", link: "https://www.kcc.go.kr", prize: 200, tags: ["#ì‘ê³¡", "#ë¡œê³ ì†¡", "#ê°„í¸ì°¸ì—¬"], weight: ["ê°œì¸", "ì…ë¬¸", "ì•„ì´ë””ì–´"] },
        { title: "K-POP ì‘ê³¡ í˜ìŠ¤í‹°ë²Œ", cat: "ìŒì•…", link: "https://kpop-contest.kr", prize: 1500, tags: ["#ì‘ê³¡", "#K-POP", "#í¸ê³¡"], weight: ["íŒ€", "ì „ë¬¸", "ìƒê¸ˆ"] },
        { title: "ë©œë¡  ì‹ ì¸ ì‘ì‚¬ê°€ ë°œêµ´ì „", cat: "ìŒì•…", link: "https://melon.com", prize: 500, tags: ["#ì‘ì‚¬", "#ê°ì„±", "#ìŒì›ë°œë§¤"], weight: ["ê°œì¸", "ì…ë¬¸", "ê²½í—˜"] },
        { title: "ê²Œì„ ì‚¬ìš´ë“œ ë””ìì¸ ì±Œë¦°ì§€", cat: "ìŒì•…", link: "https://game-audio.kr", prize: 800, tags: ["#ì‚¬ìš´ë“œ", "#íš¨ê³¼ìŒ", "#ê²Œì„"], weight: ["ê°œì¸", "ì „ë¬¸", "ìŠ¤í™"] },

        // ê¸°íš ë¶„ì•¼ (ë³´ê°•)
        { title: "ì œì¼ê¸°íš ì•„ì´ë””ì–´ í˜ìŠ¤í‹°ë²Œ", cat: "ê¸°íš", link: "https://ideafestival.cheil.co.kr/", prize: 500, tags: ["#ë§ˆì¼€íŒ…", "#ê´‘ê³ ê¸°íš", "#ìŠ¤í™"], weight: ["íŒ€", "ì…ë¬¸", "ì•„ì´ë””ì–´"] },
        { title: "ì„œìš¸ì‹œ ì •ì±… ì•„ì´ë””ì–´ ë¦¬ê·¸", cat: "ê¸°íš", link: "https://imagination.seoul.go.kr", prize: 1000, tags: ["#ì •ì±…", "#í–‰ì •", "#ì‚¬íšŒí˜ì‹ "], weight: ["íŒ€", "ì…ë¬¸", "ì•„ì´ë””ì–´"] },
        { title: "í™˜ê²½ ì‚¬ë‘ ì•„ì´ë””ì–´ ê³µëª¨ì „", cat: "ê¸°íš", link: "https://www.keco.or.kr", prize: 300, tags: ["#ì¹œí™˜ê²½", "#ìº í˜ì¸", "#ì‹¤ì²œ"], weight: ["ê°œì¸", "ì…ë¬¸", "ê²½í—˜"] },
        { title: "ëŒ€êµ­ë¯¼ ì•ˆì „ ìŠ¬ë¡œê±´ ëŒ€íšŒ", cat: "ê¸°íš", link: "https://safety.go.kr", prize: 100, tags: ["#ìŠ¬ë¡œê±´", "#ê°„í¸ì°¸ì—¬", "#ê³µìµ"], weight: ["ê°œì¸", "ì…ë¬¸", "ì•„ì´ë””ì–´"] }
    ];

    let uData = {}, step = 0, answers = [];

    function init() {
        const y = document.getElementById('u-year'), m = document.getElementById('u-month'), d = document.getElementById('u-day'), rm = document.getElementById('u-region-main');
        for(let i=2025; i>=1950; i--) y.add(new Option(i+"ë…„", i));
        for(let i=1; i<=12; i++) m.add(new Option(i+"ì›”", i));
        for(let i=1; i<=31; i++) d.add(new Option(i+"ì¼", i));
        rm.add(new Option("ì‹œ/ë„ ì„ íƒ", ""));
        Object.keys(regionData).forEach(reg => rm.add(new Option(reg, reg)));
        lucide.createIcons();
    }

    function updateSubRegion() {
        const main = document.getElementById('u-region-main').value;
        const sub = document.getElementById('u-region-sub');
        sub.innerHTML = '<option value="">ì‹œ/êµ°/êµ¬ ì„ íƒ</option>';
        if(regionData[main]) regionData[main].forEach(s => sub.add(new Option(s, s)));
    }

    function selectMode(m) { uData.mode = m; document.getElementById('screen-start').classList.add('hidden'); if(m==='pro') document.getElementById('screen-info').classList.remove('hidden'); else { uData.name="ìµëª…"; uData.job="none"; startGenre(); } }
    
    function validateAndStart() {
        const n = document.getElementById('u-name').value, m = document.getElementById('u-region-main').value, s = document.getElementById('u-region-sub').value, j = document.getElementById('u-job').value;
        if(!n || !m || !s || !j) { alert("ğŸµ ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì•¼ ì •ë°€ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."); return; }
        uData.name = n; startGenre();
    }

    function startGenre() { document.querySelectorAll('.card').forEach(c => c.classList.add('hidden')); document.getElementById('screen-genre').classList.remove('hidden'); }
    function selectGenre(g) { uData.genre = g; document.getElementById('screen-genre').classList.add('hidden'); document.getElementById('screen-quiz').classList.remove('hidden'); document.getElementById('progress-wrapper').style.display='block'; renderQuiz(); }

    function getQuizData() {
        return [
            { q: "ë„ì „í•  ì¸ì› êµ¬ì„±ì€?", a: [{t: "ë‚˜ í™€ë¡œ ì‘ì—…", v: "ê°œì¸"}, {t: "ë™ë£Œì™€ í•¨ê»˜", v: "íŒ€"}] },
            { q: "ì „ë¬¸ ì¥ë¹„ë¥¼ ë³´ìœ í•˜ì…¨ë‚˜ìš”?", a: [{t: "ë„¤, ì „ë¬¸ ì¥ë¹„ ë³´ìœ ", v: "ì „ë¬¸"}, {t: "ì•„ë‹ˆìš”, ê¸°ë³¸ íˆ´", v: "ìŠ¤ë§ˆíŠ¸í°"}] },
            { q: "íˆ¬ì… ê°€ëŠ¥í•œ ê¸°ê°„ì€?", a: [{t: "ë‹¨ê¸° ì§‘ì¤‘ (1ì£¼ì¼)", v: "ê²½í—˜"}, {t: "ì¥ê¸° í”„ë¡œì íŠ¸ (1ë‹¬+)", v: "ìƒê¸ˆ"}] },
            { q: "ì–´ë–¤ ë³´ìƒì„ ë” ì„ í˜¸í•˜ì‹œë‚˜ìš”?", a: [{t: "ì••ë„ì  ìƒê¸ˆ", v: "ìƒê¸ˆ"}, {t: "ì·¨ì—…ìš© ìŠ¤í™", v: "ìŠ¤í™"}] },
            { q: "ì£¼ìµœì‚¬ì˜ ì„±ê²©ì€?", a: [{t: "ëŒ€ê¸°ì—…/ì •ë¶€", v: "ìŠ¤í™"}, {t: "ë¯¼ê°„/ë‹¨ì²´", v: "ì•„ì´ë””ì–´"}] },
            { q: "ì‘ì—…ì˜ ë‚œì´ë„ëŠ”?", a: [{t: "ì…ë¬¸ììš© ì°¸ì—¬", v: "ì…ë¬¸"}, {t: "ì‹¤ë ¥ ì¤‘ì‹¬ ë„ì „", v: "ì „ë¬¸"}] },
            { q: "ë‚˜ì˜ ê°€ì¥ í° ê°•ì ì€?", a: [{t: "ì°½ì˜ì  ê¸°íš", v: "ì•„ì´ë””ì–´"}, {t: "ê¸°ìˆ ì  êµ¬í˜„", v: "ì „ë¬¸"}] },
            { q: "í™œë™ ì§€ì—­ì˜ ì„ í˜¸ëŠ”?", a: [{t: "ì˜¨ë¼ì¸/ì „êµ­", v: "ê²½í—˜"}, {t: "ì˜¤í”„ë¼ì¸ í¬í•¨", v: "ìŠ¤í™"}] },
            { q: "íŒ€ì›Œí¬ ì‹œ ë‚˜ì˜ ì„±í–¥ì€?", a: [{t: "ì£¼ë„ì  ë¦¬ë”©", v: "ìƒê¸ˆ"}, {t: "ì•ˆì •ì  ì„œí¬íŠ¸", v: "ìŠ¤í™"}] },
            { q: "ë„ì „ì˜ ìµœì¢… ëª©í‘œëŠ”?", a: [{t: "ë¬´ì¡°ê±´ ì…ìƒ", v: "ìŠ¤í™"}, {t: "ì¼ë‹¨ ì°¸ê°€!", v: "ì…ë¬¸"}] }
        ];
    }

    function renderQuiz() {
        const d = getQuizData();
        if(step < 10) {
            document.getElementById('quiz-count').innerText = `ì§ˆë¬¸ ${step + 1} / 10`;
            document.getElementById('quiz-q').innerText = d[step].q;
            const o = document.getElementById('quiz-opts'); o.innerHTML = '';
            d[step].a.forEach(opt => {
                const b = document.createElement('button'); b.className = 'btn btn-outline'; b.style.width = '100%';
                b.innerHTML = `<span>${opt.t}</span>`;
                b.onclick = () => { answers.push(opt.v); step++; moveCat('cat-container', 'bar-fill'); renderQuiz(); }; o.appendChild(b);
            });
        } else { startLoading(); }
    }

    function moveCat(cId, bId, cp = null) {
        const p = cp !== null ? cp : (step / 10) * 100;
        document.getElementById(bId).style.width = p + '%';
        document.getElementById(cId).style.left = p + '%';
    }

    function startLoading() {
        document.getElementById('screen-quiz').classList.add('hidden');
        document.getElementById('progress-wrapper').style.display = 'none';
        document.getElementById('screen-loading').classList.remove('hidden');
        document.getElementById('load-name').innerText = uData.name;
        let lp = 0;
        const iv = setInterval(() => {
            lp += 1; moveCat('loader-cat', 'loader-fill', lp);
            if(lp >= 100) { clearInterval(iv); setTimeout(showResults, 500); }
        }, 30);
    }

    function showResults() {
        document.getElementById('screen-loading').classList.add('hidden');
        document.getElementById('screen-result').classList.remove('hidden');
        document.getElementById('res-name').innerText = uData.name;
        const list = document.getElementById('res-list'); list.innerHTML = '';
        
        // uData.genre ê°’ì„ ì •í™•íˆ í•„í„°ë§ (ë¶„ê¸° ìˆ˜ì •)
        const filtered = contestDB.filter(c => c.cat === uData.genre)
        .map(c => {
            let s = 0; c.weight.forEach(w => { if(answers.includes(w)) s += 25; });
            s += Math.floor(Math.random() * 15); if(s > 100) s = 99; return { ...c, s };
        }).sort((a, b) => b.s - a.s);

        filtered.forEach(c => {
            const item = document.createElement('div'); item.className = 'res-item fade-in';
            item.onclick = () => window.open(c.link, '_blank');
            item.innerHTML = `<div class="match-score">${c.s}% ì¼ì¹˜</div><div class="prize-text">â‚©${c.prize.toLocaleString()}ë§Œ</div><h2>${c.title}</h2><div class="tag-wrap">${c.tags.map(t => `<span class="hashtag">${t}</span>`).join('')}</div>`;
            list.appendChild(item);
        });
    }

    function goBack(currentId) {
        document.getElementById(currentId).classList.add('hidden');
        if(currentId === 'screen-info') { document.getElementById('screen-start').classList.remove('hidden'); }
        else if(currentId === 'screen-genre') { if(uData.mode === 'pro') document.getElementById('screen-info').classList.remove('hidden'); else document.getElementById('screen-start').classList.remove('hidden'); }
        else if(currentId === 'screen-quiz') {
            if(step > 0) { step--; answers.pop(); document.getElementById('screen-quiz').classList.remove('hidden'); moveCat('cat-container', 'bar-fill'); renderQuiz(); }
            else { document.getElementById('progress-wrapper').style.display = 'none'; document.getElementById('screen-genre').classList.remove('hidden'); }
        }
    }

    function reQuiz() { step = 0; answers = []; document.getElementById('bar-fill').style.width='0%'; document.getElementById('cat-container').style.left='0%'; document.getElementById('screen-result').classList.add('hidden'); document.getElementById('screen-genre').classList.remove('hidden'); }
    function reInfo() { location.reload(); }
    init();
</script>

</body>
</html>